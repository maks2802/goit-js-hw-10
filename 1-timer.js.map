{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst startBtn = document.querySelector(\"button[data-start]\");\nconst daysSpan = document.querySelector(\"[data-days]\");\nconst hoursSpan = document.querySelector(\"[data-hours]\");\nconst minutesSpan = document.querySelector(\"[data-minutes]\");\nconst secondsSpan = document.querySelector(\"[data-seconds]\");\nlet userSelectedDate = null;\n\nclass CountdownTimer {\n    constructor({ onTick }) {\n        this.intervalId = null;\n        this.isActive = false;\n        this.onTick = onTick;\n\n        this.init();\n    }\n\n    init() {\n        this.onTick(this.getTimeComponents(0));\n    }\n\n    start() {\n        if (this.isActive || !userSelectedDate) return;\n\n        this.isActive = true;\n        startBtn.disabled = true;\n        document.getElementById(\"datetime-picker\").disabled = true;\n\n        this.intervalId = setInterval(() => {\n            const timeLeft = userSelectedDate - new Date();\n\n            if (timeLeft <= 0) {\n                this.stop();\n                return;\n            }\n\n            const time = this.getTimeComponents(timeLeft);\n            this.onTick(time);\n        }, 1000);\n    }\n\n    stop() {\n        clearInterval(this.intervalId);\n        this.isActive = false;\n        this.onTick(this.getTimeComponents(0));\n        startBtn.disabled = true;\n        document.getElementById(\"datetime-picker\").disabled = false;\n    }\n\n    getTimeComponents(time) {\n        const days = this.pad(Math.floor(time / (1000 * 60 * 60 * 24)));\n        const hours = this.pad(Math.floor((time % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)));\n        const mins = this.pad(Math.floor((time % (1000 * 60 * 60)) / (1000 * 60)));\n        const secs = this.pad(Math.floor((time % (1000 * 60)) / 1000));\n\n        return { days, hours, mins, secs };\n    }\n\n    pad(value) {\n        return String(value).padStart(2, \"0\");\n    }\n}\n\nconst countdownTimer = new CountdownTimer({\n    onTick: updateClockface,\n});\n\nstartBtn.addEventListener(\"click\", countdownTimer.start.bind(countdownTimer));\n\nfunction updateClockface({ days, hours, mins, secs }) {\n    daysSpan.textContent = days;\n    hoursSpan.textContent = hours;\n    minutesSpan.textContent = mins;\n    secondsSpan.textContent = secs;\n}\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n        const selectedDate = selectedDates[0];\n        if (selectedDate <= new Date()) {\n            iziToast.error({ title: \"Error\", message: \"Please choose a date in the future\", position: 'topRight' });\n            startBtn.disabled = true;\n        } else {\n            userSelectedDate = selectedDate;\n            startBtn.disabled = false;\n        }\n    },\n};\n\nflatpickr(\"#datetime-picker\", options);"],"names":["startBtn","daysSpan","hoursSpan","minutesSpan","secondsSpan","userSelectedDate","CountdownTimer","onTick","timeLeft","time","days","hours","mins","secs","value","countdownTimer","updateClockface","options","selectedDates","selectedDate","iziToast","flatpickr"],"mappings":"2GAKA,MAAMA,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAW,SAAS,cAAc,aAAa,EAC/CC,EAAY,SAAS,cAAc,cAAc,EACjDC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAc,SAAS,cAAc,gBAAgB,EAC3D,IAAIC,EAAmB,KAEvB,MAAMC,CAAe,CACjB,YAAY,CAAE,OAAAC,GAAU,CACpB,KAAK,WAAa,KAClB,KAAK,SAAW,GAChB,KAAK,OAASA,EAEd,KAAK,KAAI,CACZ,CAED,MAAO,CACH,KAAK,OAAO,KAAK,kBAAkB,CAAC,CAAC,CACxC,CAED,OAAQ,CACA,KAAK,UAAY,CAACF,IAEtB,KAAK,SAAW,GAChBL,EAAS,SAAW,GACpB,SAAS,eAAe,iBAAiB,EAAE,SAAW,GAEtD,KAAK,WAAa,YAAY,IAAM,CAChC,MAAMQ,EAAWH,EAAmB,IAAI,KAExC,GAAIG,GAAY,EAAG,CACf,KAAK,KAAI,EACT,MACH,CAED,MAAMC,EAAO,KAAK,kBAAkBD,CAAQ,EAC5C,KAAK,OAAOC,CAAI,CACnB,EAAE,GAAI,EACV,CAED,MAAO,CACH,cAAc,KAAK,UAAU,EAC7B,KAAK,SAAW,GAChB,KAAK,OAAO,KAAK,kBAAkB,CAAC,CAAC,EACrCT,EAAS,SAAW,GACpB,SAAS,eAAe,iBAAiB,EAAE,SAAW,EACzD,CAED,kBAAkBS,EAAM,CACpB,MAAMC,EAAO,KAAK,IAAI,KAAK,MAAMD,EAAQ,KAAoB,CAAC,EACxDE,EAAQ,KAAK,IAAI,KAAK,MAAOF,GAAQ,IAAO,GAAK,GAAK,KAAQ,IAAO,GAAK,GAAG,CAAC,EAC9EG,EAAO,KAAK,IAAI,KAAK,MAAOH,GAAQ,IAAO,GAAK,KAAQ,IAAO,GAAG,CAAC,EACnEI,EAAO,KAAK,IAAI,KAAK,MAAOJ,GAAQ,IAAO,IAAO,GAAI,CAAC,EAE7D,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,KAAAC,EAAM,KAAAC,CAAI,CACnC,CAED,IAAIC,EAAO,CACP,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACvC,CACL,CAEA,MAAMC,EAAiB,IAAIT,EAAe,CACtC,OAAQU,CACZ,CAAC,EAEDhB,EAAS,iBAAiB,QAASe,EAAe,MAAM,KAAKA,CAAc,CAAC,EAE5E,SAASC,EAAgB,CAAE,KAAAN,EAAM,MAAAC,EAAO,KAAAC,EAAM,KAAAC,CAAI,EAAI,CAClDZ,EAAS,YAAcS,EACvBR,EAAU,YAAcS,EACxBR,EAAY,YAAcS,EAC1BR,EAAY,YAAcS,CAC9B,CAEA,MAAMI,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACnB,MAAMC,EAAeD,EAAc,CAAC,EAChCC,GAAgB,IAAI,MACpBC,EAAS,MAAM,CAAE,MAAO,QAAS,QAAS,qCAAsC,SAAU,UAAU,CAAE,EACtGpB,EAAS,SAAW,KAEpBK,EAAmBc,EACnBnB,EAAS,SAAW,GAE3B,CACL,EAEAqB,EAAU,mBAAoBJ,CAAO"}